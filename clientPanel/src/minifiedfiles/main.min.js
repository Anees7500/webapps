var clientApp=angular.module("clientApp",["ngRoute","ngMaterial","ngCookies"]);clientApp.config(["$routeProvider","$locationProvider",function(e,n){e.when("/",{templateUrl:"sections/clientLogin/login.tpl.html",title:"Header-part",controller:"LoginController"}).when("/dashboard",{templateUrl:"sections/clientDashboard/dashboard.tpl.html",title:"Header-part",controller:"ClientDashboardController"})}]),clientApp.controller("ClientDashboardController",["$scope","$http","$rootScope","$cookies","$location","clientDashboardService","$interval",function(r,i,e,c,n,a,t){r.IsVisible=!1,r.ShowHide=function(n,e){console.log("passed value here ",JSON.stringify(n));var a=n.isVisible,t="http://fancymonk.com:9125/api/client/get-all-employee-data?companyId="+c.get("clientPanelCompanyId")+"&date="+n.Date;i.get(t).then(function(e){console.log("response :  ",JSON.stringify(e)),n.employeeComingList=e.data.data.details});for(var o=0;o<e.length;o++)e[o].isVisible=!1;n.isVisible=!a},r.employeeComingList=[],r.dateList=[{Date:"2018-11-16",Count:20},{Date:"2018-11-17",Count:10}];var o="http://fancymonk.com:9125/api/common/get-all-employees?companyId="+c.get("clientPanelCompanyId");if(i.get(o).then(function(e){r.employeeList=e.data.data.employees}),r.employeeList=[],r.addEmpDtls=function(n){var e={};e.firstName=n.firstName,e.lastName=n.lastName,e.mobile=n.mobile,e.employeeId=n.employeeId,console.log("list ",JSON.stringify(r.employeeList)),r.employeeList.some(function(e){return e.employeeId===n.employeeId})?console.log("user already added"):(r.employeeList.push(e),e.companyId=c.get("clientPanelCompanyId"),a.addEmployeeToDB(e,"http://fancymonk.com:9125/api/client/add-employee"),console.log("comment 3 ",r.newEmp))},r.logout=function(){r.username="",r.password="",n.path("/")},r.enableBooleans=function(e){r.categoryBool=!1,r.requirementBool=!1,r.feedbackBool=!1,r.manageEmployee=!1,r.employeeCount=!1,r[e]=!0},r.enableBooleans("categoryBool"),null!=e.companyDetails)r.companyDetail=e.companyDetails,k(r.companyDetail);else{var l="http://fancymonk.com:9124/api/common/corporate-company?companyId="+c.get("clientPanelCompanyId");i.get(l).then(function(e){r.companyDetail=e.data.data.company,k(r.companyDetail)})}var s="http://fancymonk.com:9124/api/admin/corporate-reviews?companyId="+c.get("clientPanelCompanyId");i.get(s).then(function(e){r.feedback=e.data.data.reviews,r.feedback=r.feedback.reverse(),r.Item=[],r.itemsPerPage=10,r.currentPage=0,r.range=function(){var e,n=[];(e=r.currentPage)>r.pageCount()-5&&(e=r.pageCount()-5);for(var a=e;a<e+5;a++)n.push(a);return n},r.prevPage=function(){0<r.currentPage&&r.currentPage--},r.prevPageDisabled=function(){return 0===r.currentPage?"disabled":""},r.nextPage=function(){r.currentPage<r.pageCount()-1&&r.currentPage++},r.nextPageDisabled=function(){return r.currentPage===r.pageCount()-1?"disabled":""},r.pageCount=function(){return Math.ceil(r.total/r.itemsPerPage)},r.setPage=function(e){0<e&&e<r.pageCount()&&(r.currentPage=e)},r.$watch("currentPage",function(e,n){var a,t,o;r.pagedItems=(a=r.feedback,t=e*r.itemsPerPage,o=r.itemsPerPage,a.slice(t,t+o)),r.total=r.feedback.length})}),r.companyRequirementsSorted=[];var m={dayName:"MONDAY"},p={dayName:"TUESDAY"},u={dayName:"WEDNESDAY"},d={dayName:"THURSDAY"},y={dayName:"FRIDAY"},g={dayName:"SATURDAY"},h={dayName:"SUNDAY"};r.companyRequirementsSorted.push(m),r.companyRequirementsSorted.push(p),r.companyRequirementsSorted.push(u),r.companyRequirementsSorted.push(d),r.companyRequirementsSorted.push(y),r.companyRequirementsSorted.push(g),r.companyRequirementsSorted.push(h);var f="http://fancymonk.com:9124/api/common/company-requirement?companyId="+c.get("clientPanelCompanyId");function k(e){r.Menu=[],e.breakfast&&r.Menu.push("Breakfast"),e.lunch&&r.Menu.push("Lunch"),e.dinner&&r.Menu.push("Dinner"),e.snacks&&r.Menu.push("Snacks"),e.midNightSnacks&&r.Menu.push("Mid Night Snacks"),e.earlyMorningSnacks&&r.Menu.push("Early Morning Snacks"),r.Menu.length<=3?r.Data=[0]:r.Menu.length<=6?r.Data=[0,1]:r.Data=[0,1,2]}i.get(f).then(function(e){for(var n=0;n<r.companyRequirementsSorted.length;n++)for(var a=0;a<e.data.data.requirements.length;a++)r.companyRequirementsSorted[n].dayName===e.data.data.requirements[a].dayName&&(r.companyRequirementsSorted[n]=e.data.data.requirements[a]);!function(e,n){r.companyRequirements={},e.breakfast&&(r.companyRequirements.Breakfast=function(e){for(var n=[],a=0;a<e.length;a++){var t={},o=e[a];t.count=o.breakfast,t.price=o.breakfastPrice,t.day=o.dayName,n.push(t)}return n}(n));e.lunch&&(r.companyRequirements.Lunch=function(e){for(var n=[],a=0;a<e.length;a++){var t={},o=e[a];t.count=o.lunch,t.price=o.lunchPrice,t.day=o.dayName,n.push(t)}return n}(n));e.dinner&&(r.companyRequirements.Dinner=function(e){for(var n=[],a=0;a<e.length;a++){var t={},o=e[a];t.count=o.dinner,t.price=o.dinnerPrice,t.day=o.dayName,n.push(t)}return n}(n));e.snacks&&(r.companyRequirements.Snacks=function(e){for(var n=[],a=0;a<e.length;a++){var t={},o=e[a];t.count=o.snacks,t.price=o.snacksPrice,t.day=o.dayName,n.push(t)}return n}(n));e.midNightSnacks&&(r.companyRequirements["Mid Night Snacks"]=function(e){for(var n=[],a=0;a<e.length;a++){var t={},o=e[a];t.count=o.midNightSnacks,t.price=o.midNightSnacksPrice,t.day=o.dayName,n.push(t)}return n}(n));e.earlyMorningSnacks&&(r.companyRequirements["Early Morning Snacks"]=function(e){for(var n=[],a=0;a<e.length;a++){var t={},o=e[a];t.count=o.earlyMorningSnacks,t.price=o.earlyMorningSnacksPrice,t.day=o.dayName,n.push(t)}return n}(n))}(r.companyDetail,r.companyRequirementsSorted)}),r.Days=["MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY","SUNDAY"],r.demo={showTooltip:!1,tipDirection:"bottom"},r.demo.delayTooltip=void 0,r.$watch("demo.delayTooltip",function(e){demo.delayTooltip=parseInt(e,10)||0})}]),clientApp.factory("clientDashboardService",["$http","$cookies","$httpParamSerializerJQLike",function(a,e,t){return{getCompanyInformation:function(e){a.get(e).then(function(e){},function(e){})},addEmployeeToDB:function(e,n){a({method:"POST",url:n,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:t(e)}).then(function(e){console.log("response add employee",JSON.stringify(e)),1==e.data.status||console.log("error logging in")}).catch(function(e){})}}}]),clientApp.controller("LoginController",["$scope","ClientLoginService","$rootScope","$cookies","$http","$route",function(e,n,a,t,o,r){e.login=function(e){console.log("check ",JSON.stringify(e)),n.login(e,"http://fancymonk.com:9124/api/corporate/login")}}]),clientApp.factory("ClientLoginService",["$http","$httpParamSerializerJQLike","$location","$rootScope","$cookies",function(a,t,o,r,i){return{login:function(e,n){console.log("client credential message ",e),a({method:"POST",url:n,headers:{"Content-Type":"application/x-www-form-urlencoded",type:"clientPanel",scm:"fancymonk",Authorization:"Basic WVhCd1FHWmhibU41Ylc5dWEyRmhZV0Z1OjE1OjJDOjJBOkZFOjUxOkQwOkM3OjNCOjQ2OjFGOkREOjk2Ojk0OkFGOjkyOkE2OjFGOjUyOjBEOkUz"},data:t(e)}).then(function(e){console.log("response logins ",JSON.stringify(e)),1==e.data.status&&(r.companyDetails=e.data.data.company,i.put("clientPanelCompanyId",e.data.data.company.id),o.path("/dashboard"))}).catch(function(e){})}}}]);